<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Sideburn</title>
<link rel="stylesheet" href="demo.css">
<script src="deps/jquery-1.5.1.min.js"></script>
<script src="deps/jquery-ui-1.8.16.slider.min.js"></script>
<script src="deps/underscore.min.js"></script>
<script src="jquery.sideburn.js"></script>
<script>
var recalculate = function() {
    var slideshows = $('ul.sideburn');

    slideshows.sideburn('destroy');

    slideshows
        .removeAttr('data-speed')
        .removeData('data-speed')
        .removeAttr('data-timeout')
        .removeData('data-timeout')
        .removeAttr('data-shuffle')
        .removeData('data-shuffle')
        .removeAttr('data-transition')
        .removeData('data-transition')
        .removeAttr('data-skipfirstrun')
        .removeData('data-skipfirstrun')
        .removeAttr('data-nav')
        .removeData('data-nav');

    slideshows.data('speed', $('input[name=speed]').val());
    if ($('#autoplay_yes').is(':checked')) {
        slideshows.data('timeout', $('input[name=interval]').val());
    } else {
        slideshows.data('timeout', 0);
    }

    //slideshows.data('shuffle', $('#shuffle_yes').is(':checked'));
    slideshows.data('shuffle', false);

    slideshows.data('transition', $('select[name=transition]').val());

    slideshows.data('skipfirstrun', $('#skipfirstrun_yes').is(':checked'));

    if (!$('#position_none').is(':checked')) {
        var nav = {
            position: $('input[name=position]:checked').val(),
            style: $('input[name=style]:checked').val(),
            navSeparator: $('input[name=navseparator]').val(),
            nextText: $('input[name=nexttext]').val(),
            previousText: $('input[name=previoustext]').val(),
            showTotal:  $('#showtotal_yes').is(':checked'),
            totalSeparator: $('input[name=totalseparator]').val(),
            numbering: $('input[name=numbering]:checked').val(),
            showAll:  $('#showall_yes').is(':checked'),
            allText: $('input[name=alltext]').val(),
            oneText: $('input[name=onetext]').val()
        };
        slideshows.data('nav', nav);
    } else {
        // removeData doesn't work. oh well.
        slideshows.data('nav', null);
    }

    // only initialize the one that's visible
    // (otherwise you get a lot of "zero" dimensions)
    $('.tabs-content .active ul.sideburn').sideburn();
};
var refresh = _.debounce(recalculate, 500);

$(document).ready(function() {
    var tabs = $('ul.tabs');
    tabs.each(function(i) {
        //Get all tabs
        var tab = $(this).find('> li > a');
        tab.click(function(e) {
            //Get Location of tab's content
            var contentLocation = $(this).attr('href');

            //Let go if not a hashed one
            if (contentLocation.charAt(0) == "#") {
                e.preventDefault();

                //Make Tab Active
                tab.removeClass('active');
                $(this).addClass('active');

                //Show Tab Content & add active class
                $(contentLocation)
                    .show()
                    .addClass('active')
                    .siblings()
                    .hide()
                    .removeClass('active');

                var sideburn = $(contentLocation).find('ul.sideburn'),
                    wrap = $(contentLocation).find('.sideburn-wrap');

                if (sideburn.length) {
                    if (wrap.length) {
                        sideburn.sideburn("refresh"); // recalculate size
                    } else {
                        sideburn.sideburn(); // initialize
                    }
                }
            }
        });
    });

    var settingswrap = $('#sideburnsettings');

    // sliders
    $('.sliderfield').each(function() {
        var fld = $(this),
            input = fld.find('input'),
            slider = fld.find('.slider'),
            value = input.val();

        slider.slider({
            min: slider.data('min'),
            max: slider.data('max'),
            step: slider.data('step'),
            value: value
        });
    });
    $('.slider').bind('slide', function(event, ui) {
        var fld = $(this).parents('.sliderfield'),
            input = fld.find('input'),
            valueLabel = fld.find('.value'),
            val = ui.value;

        input.val(val);
        valueLabel.html(val);
    });

    // show / hide subsections of the form
    var
        radioMap = {
            'style_next': 'withnext',
            'style_jump': 'withjump',
            'autoplay_yes': 'withinterval',
            'showtotal_yes': 'withtotalseparator',
            'showall_yes': 'withall',
            'style_thumbnails': 'withoutnavseparator'
        };
    settingswrap.find('input[type=radio]').change(function() {
        for (var id in radioMap) {
            if (radioMap.hasOwnProperty(id)) {
                var
                    className = radioMap[id],
                    checked = $('#'+id).is(':checked');

                if (checked && !settingswrap.hasClass(className)) {
                    settingswrap.addClass(className);
                } else if (!checked && settingswrap.hasClass(className)) {
                    settingswrap.removeClass(className);
                }
            }
        }
    });

    settingswrap.find('.slider').bind('slidechange', function() {
        refresh();
    });
    settingswrap.find('input[type=radio],select').change(function() {
        refresh();
    });
    settingswrap.find('input[type=text]').keyup(function() {
        refresh();
    });

    recalculate();
});
</script>
</head>
<body>

<div class="stage">
<div class="wrap">

<div id="sideburnsettings" class="withnext">

<h1>Sideburn Settings</h1>

<hr>
<div class="field sliderfield">
<label>speed
<div class="sliderwrap">
<input type="hidden" name="speed" value="500">
<div class="slider" id="speed-slider" data-step="100" data-min="0" data-max="2000"></div>
<div class="valuewrap"><span class="value">500</span>ms</div>
</div>
</label>
</div>

<div class="field selectfield">
<label for="transition">transition
<select name="transition">
<option value="fade">fade</option>
<option value="slide-left">slide left</option>
<option value="slide-right">slide right</option>
<option value="slide-left-right">slide left and right</option>
<option value="slide-left-right-wrap" selected>wrap around</option>
</select>
</label>
</div>

<div class="field optionsfield">
autoplay?
<div class="options">
<label for="autoplay_yes">
<input type="radio" name="autoplay" id="autoplay_yes" value="true"> yes
</label>
<label for="autoplay_no">
<input type="radio" name="autoplay" id="autoplay_no" value="false" checked> no
</label>
</div>
</div>

<div class="field sliderfield" id="intervalfield">
<label for="interval">interval
<div class="sliderwrap">
<input type="hidden" name="interval" value="4000">
<div class="slider" id="interval-slider" data-step="100" data-min="100" data-max="10000"></div>
<div class="valuewrap"><span class="value">4000</span>ms</div>
</div>
</label>
</div>

<!--
<div class="field optionsfield" id="shufflefield">
shuffle?
<div class="options">
<label for="shuffle_yes">
<input type="radio" name="shuffle" id="shuffle_yes" value="true"> yes
</label>
<label for="shuffle_no">
<input type="radio" name="shuffle" id="shuffle_no" value="false" checked> no
</label>
</div>
</div>
-->

<div class="field optionsfield">
skip first run animation?
<div class="options">
<label for="skipfirstrun_yes">
<input type="radio" name="skipfirstrun" id="skipfirstrun_yes" value="true"> yes
</label>
<label for="skipfirstrun_no">
<input type="radio" name="skipfirstrun" id="skipfirstrun_no" value="false" checked> no
</label>
</div>
</div>

<hr>

<div class="field optionsfield">
nav
<div class="options">
<label for="position_above">
<input type="radio" name="position" id="position_above" value="above" checked> above
</label>
<label for="position_below">
<input type="radio" name="position" id="position_below" value="below"> below
</label>
<label for="position_none">
<input type="radio" name="position" id="position_none" value="none"> none
</label>
</div>
</div>

<div class="field optionsfield">
nav style
<div class="options">

<label for="style_next">
<input type="radio" name="style" id="style_next" value="next" checked> next
</label>

<label for="style_jump">
<input type="radio" name="style" id="style_jump" value="jump"> jump
</label>

<label for="style_thumbnails">
<input type="radio" name="style" id="style_thumbnails" value="thumbnails"> thumbnails
</label>

</div>
</div>

<div class="field textfield" id="navstylefield">
<label for="navseparator">nav separator
<input type="text" name="navseparator" value="/">
</label>
</div>

<div class="group" id="nextgroup">
<hr>

<div class="field textfield">
<label for="previoustext">previous
<input type="text" name="previoustext" value="Previous">
</label>
</div>

<div class="field textfield">
<label for="nexttext">next
<input type="text" name="nexttext" value="Next">
</label>
</div>

<div class="field optionsfield">
show total?
<div class="options">
<label for="showtotal_yes">
<input type="radio" name="showtotal" id="showtotal_yes" value="true"> yes
</label>
<label for="showtotal_no">
<input type="radio" name="showtotal" id="showtotal_no" value="false" checked> no
</label>
</div>
</div>

<div class="field textfield" id="totalseparatorfield">
<label for="totalseparator">total separator
<input type="text" name="totalseparator" value=" of ">
</label>
</div>

<div class="field optionsfield">
include show all?
<div class="options">
<label for="showall_yes">
<input type="radio" name="showall" id="showall_yes" value="true"> yes
</label>
<label for="total_no">
<input type="radio" name="showall" id="showall_no" value="false" checked> no
</label>
</div>
</div>

<div class="group" id="allgroup">

<div class="field textfield">
<label for="alltext">show all
<input type="text" name="alltext" value="Show all">
</label>
</div>

<div class="field textfield">
<label for="onetext">show one
<input type="text" name="onetext" value="Show one">
</label>
</div>

</div> <!-- #allgroup -->

</div> <!-- #nextgroup -->

<div id="jumpgroup">
<hr>

<div class="field optionsfield">
number style
<div class="options">
<label for="numbering_1">
<input type="radio" name="numbering" id="numbering_1" value="1" checked> 1 2 .. 10
</label>
<label for="numbering_01">
<input type="radio" name="numbering" id="numbering_01" value="01"> 01 02 .. 10
</label>
</div>
</div>

</div> <!-- #jumpgroup -->

</div> <!-- .sideburnsettings -->

<div class="preview">

<!--
why placehold.it?
=================

* Remarkably difficult to find free images that make good test data.
* I need square, landscape, portrait and mixed examples.
* I want to be able to show off the responsive side of things.
* It is handy to be able to test the preloader on non-local images.
-->

<ul class="tabs">
<li><a class="active" href="#square">Square</a></li>
<li><a href="#landscape">Landscape</a></li>
<li><a href="#portrait">Portrait</a></li>
<li><a href="#mixed">Mixed</a></li>
</ul>

<ul class="tabs-content">
<li class="active" id="square">
<ul class="sideburn">
<li><img src="http://placehold.it/600x600.png/AAFF00/ffffff" width="600" height="600"></li>
<li><img src="http://placehold.it/600x600.png/FFAA00/ffffff" width="600" height="600"></li>
<li><img src="http://placehold.it/600x600.png/FF00AA/ffffff" width="600" height="600"></li>
<li><img src="http://placehold.it/600x600.png/AA00FF/ffffff" width="600" height="600"></li>
<li><img src="http://placehold.it/600x600.png/00AAFF/ffffff" width="600" height="600"></li>
</ul>
</li>

<li id="landscape">
<ul class="sideburn">
<li><img src="http://placehold.it/800x600.png/00AAFF/ffffff" width="800" height="600"></li>
<li><img src="http://placehold.it/800x600.png/AAFF00/ffffff" width="800" height="600"></li>
<li><img src="http://placehold.it/800x600.png/FFAA00/ffffff" width="800" height="600"></li>
<li><img src="http://placehold.it/800x600.png/FF00AA/ffffff" width="800" height="600"></li>
<li><img src="http://placehold.it/800x600.png/AA00FF/ffffff" width="800" height="600"></li>
</ul>
</li>

<li id="portrait">
<ul class="sideburn">
<li><img src="http://placehold.it/600x800.png/AA00FF/ffffff" width="600" height="800"></li>
<li><img src="http://placehold.it/600x800.png/00AAFF/ffffff" width="600" height="800"></li>
<li><img src="http://placehold.it/600x800.png/AAFF00/ffffff" width="600" height="800"></li>
<li><img src="http://placehold.it/600x800.png/FFAA00/ffffff" width="600" height="800"></li>
<li><img src="http://placehold.it/600x800.png/FF00AA/ffffff" width="600" height="800"></li>
</ul>
</li>

<li id="mixed">
<ul class="sideburn">
<li><img src="http://placehold.it/600x800.png/AAFF00/ffffff" width="600" height="800"></li>
<li><img src="http://placehold.it/600x600.png/FFAA00/ffffff" width="600" height="600"></li>
<li><img src="http://placehold.it/800x600.png/FF00AA/ffffff" width="800" height="600"></li>
<li><img src="http://placehold.it/600x600.png/AA00FF/ffffff" width="600" height="600"></li>
</ul>
</li>
</ul>

<p class="footer">See <a href="http://github.com/thisarmy/sideburn">http://github.com/thisarmy/sideburn</a></p>

</div> <!-- .preview -->
</div> <!-- .wrap -->
</div> <!-- .stage -->

</body>
</html>

